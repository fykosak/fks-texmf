%
% @author Michal Koutný <michal@fykos.cz>
%
% @description Informations about single seminars. Keeps the
%              LaTeX classes generic.
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{fksmeta}[2011/09/11 Information about seminars]

\RequirePackage{fkstables}
\RequirePackage{fkslang}

%\newcommand\metavar[1]{%
%  \expandafter\ifx\csname met@#1\endcsname\relax
%  \PackageWarning{fksmeta}{Undefined variable #1}
%  \else
%  \expandafter\csname met@#1\endcsname\fi
%}

\newcommand\problemLetter[1]{
	\fksMeta@problemLetter{\value{#1}}
}

\newcommand\problemData[1]{}
\newcommand\formatContestYear[1]{\Roman{#1}}

% TODO
	\renewcommand\metaprobdata[1]{%
	% Tags for study years (default are all)
	{\LARGE
	\ifthenelse{\equal{\@probstudyyears}{{N/A}}}{%
	\year@tag{6}%
	\year@tag{7}%
	\year@tag{8}%
	\year@tag{9}
	}{%
	\let\do\year@tag%
	\expandafter\docsvlist\@probstudyyears%
	}% end of study year tags
	% tags for problem type
	\ifthenelse{\equal{\@probtags}{{N/A}}}{}{%
	\let\do\type@tag%
	\expandafter\docsvlist\@probtags%
	} % end of problem type tags
	}}
% end TODO

\renewcommand\maketitle{}


% --- VÝFUK ---
\DeclareOption{vyfuk}{%

% TODO
\newcommand\year@tag[1]{\ifcase #1 \or 1\or 2\or 3\or 4\or 5\or \ding{187}\or \ding{188}\or \ding{189}\or \ding{190}\else \@ctrerr\fi{} }
\newcommand\type@tag[1]{%
	\ifthenelse{\equal{#1}{hard}}{\ding{72}}{}%
}

%zadania
\renewcommand\met@summerheaderproblems{\centering
	\includegraphics[width=23mm]{zmrzlina.eps}\hspace{20pt}\raisebox{0.6cm}
	{Zadání \Roman{batch}. části prázdninové série}
	\hspace{20pt}\includegraphics[width=23mm]{plazmaL.eps}
}

\renewcommand\met@summerheaderproblemsBonus{\centering
	\includegraphics[width=23mm]{zmrzlina.eps}\hspace{20pt}\raisebox{0.6cm}
	{Zadání bonusové prázdninové série}
	\hspace{20pt}\includegraphics[width=23mm]{plazmaL.eps}
}

% řešení
%  \renewcommand\met@headersolutions{\centering Řešení \Roman{solvedbatch}. série}
\renewcommand\met@summerheadersolutions{\centering
	\includegraphics[width=23mm]{zmrzlina.eps}\hspace{20pt}\raisebox{0.6cm}
	{Řešení \Roman{solvedbatch}. části prázdninové série}
	\hspace{20pt}\includegraphics[width=23mm]{zarovkaL.eps}
}

% Autoři Výfučtení
% \serauthors[1] macro is empty operation for TeX, its only purpose at the moment is to play
% a role of searchable thing for grep in creating of a yearbook (yearbook/scripts/serauthors.sh).
\newcommand\autori@vyfucteni{}
\newcommand\serauthors[1]{
	\renewcommand\autori@vyfucteni{#1}
}

% poradie
\renewcommand\met@summerheaderresults{\centering
	\includegraphics[width=23mm]{stupne123.eps}\hspace{20pt}\raisebox{0.6cm}
	{Konečné pořadí řešitelů prázdninové série}
%\hspace{20pt}\includegraphics[width=23mm]{zmrzlina.eps}
}

% Since yearbook defines its own header and code below in else branch overwrites
% such a behaviour, we need to exclude it within ifyearbook.
\ifyearbook
	%
\else
	% Layout settings brought from fksbase.cls, redefining headers.
	\fancyhead{} % To get rid of fksbaseheader, cleaning it up.
	\pagestyle{fancy} % New definition of header starts here.
	\renewcommand{\headrulewidth}{0pt}
	\chead{\setlength{\parindent}{0pt}
		\colorbox{black}{
			\begin{minipage}{\textwidth-6pt}
				\textcolor{white}{\raisebox{-8.5pt}{\bfseries\sffamily \met@headername{}}
				\hfill \raisebox{-8.5pt}{\bfseries\sffamily \met@volumeid~}}
			\end{minipage}
		}
	}
	\setlength{\headsep}{5mm}
\fi
% end TODO

\ProcessOptions\relax
