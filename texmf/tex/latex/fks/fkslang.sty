%
% @author Lukáš Ledvina <lukasl@fykos.cz>
%
% @description transcription of language names to ISO639-1 codes
%              set polyglossia language from class option (default czech)
%

\RequirePackage{polyglossia}

\newif\iffksLangSelected
\fksLangSelectedfalse

% add new language to FYKOS macros
\newcommand\@langInit[2]{%
	% define language name and code variables
	\expandafter\gdef\csname @langName#2\endcsname{#1}%
	\expandafter\gdef\csname @langCode#1\endcsname{#2}%

	% create option for selecting that language
	\DeclareOption{#1}{ % full name as argument
		\setdefaultlanguage{#1}\fksLangSelectedtrue
	}
	\DeclareOption{#2}{ % iso code as argument
		\setdefaultlanguage{#1}\fksLangSelectedtrue
	}
}%

% returns iso code for actual lang name
% when no argument given return current language code
\newcommand\langCode[1][\languagename]{%
	\expandafter\ifx\csname @langCode#1\endcsname\relax
		\PackageWarning{fkslang}{Undefined language #1}%
		null%
	\else
		\expandafter\csname @langCode#1\endcsname
	\fi
}

% returns ilang name for iso code
% when no argument given return current language name
\newcommand\langName[1][]{%
	\ifthenelse{\equal{#1}{}}{
		\languagename
	}{
		\expandafter\ifx\csname @langName#1\endcsname\relax
			\PackageWarning{fkslang}{Undefined language code #1}%
			null%
		\else
			\expandafter\csname @langName#1\endcsname
		\fi
	}
}

% language optional
\newcommand\lngopt[2]{%
	\ifthenelse{\equal{#1}{\langCode}}{#2}{}%
}

% language without options
\iffksLangSelected\else
	\PackageWarning{fksLang}{No language passed, Czech selected.}
\fi
\setdefaultlanguage{czech}

% supproted languages
\@langInit{czech}{cs}
\@langInit{slovak}{sk}
\@langInit{english}{en}
\ProcessOptions\relax
